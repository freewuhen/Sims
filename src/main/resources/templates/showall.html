<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>good students</title>

    <!-- Bootstrap CSS -->
    <link href="//apps.bdimg.com/libs/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="sign.css">
    <!-- jQuery (Bootstrap 的所有 JavaScript 插件都依赖 jQuery，所以必须放在前边) -->
    <script src="https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js"></script>
    <!-- 加载 Bootstrap 的所有 JavaScript 插件。你也可以根据需要只加载单个插件。 -->
    <script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>
<body BACKGROUND="bg.jpg">
    <ul class="nav nav-pills">
    <li><a href="index.html">Home</a></li>
    <li class="active"><a href="showall.html">所有学生</a></li>
    <li><a href="addStudent.html">添加学生</a></li>
    <li><a href="findoneStudent.html">管理学生</a></li>
    </ul>
    <div class="center-block">

        <table class="table table-hover" >
        <thead>
            <tr class="text-danger">
                <th>学号</th>
                <th>姓名</th>
                <th>年龄</th>
                <th>姓名</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="student : ${students}" class="text-danger">
                <td th:text="${student.sno}"></td>
                <td th:text="${student.sname}"></td>
                <td th:text="${student.sage}"></td>
                <td th:text="${student.ssex}"></td>
                <td>
                    <button type="button" class="btn btn-primary btn-lg"  >
                        修改
                    </button>
                </td>
            </tr>
        </tbody>

    </table>

    </div>
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        <h4 class="modal-title" id="myModalLabel">更新信息</h4>
                    </div>
                    <div class="modal-body">

                            <div class="row">
                                <div class="col-md-offset-3 col-md-6">
                                    <form class="form-horizontal" id="myForm">
                                        <div class="form-group">
                                            <input type="text" class="form-control" name="sno" id = "sno">
                                        </div>
                                        <div class="form-group">
                                            <input type="text" class="form-control" name="sname" id = "sname">
                                        </div>
                                        <div class="form-group">
                                            <input type="text" class="form-control" name="sage" id="sage">
                                        </div>
                                        <div class="form-group">
                                            <input type="text" class="form-control" name="ssex" id="ssex">
                                        </div>
                                        <div class="form-group">
                                            <button type="submit" class="btn btn-primary" id = "post_button">提交</button>
                                        </div>


                                    </form>
                                </div>
                            </div>

                    </div>
                    <!--<div class="modal-footer">-->
                        <!--<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>-->
                        <!--<button type="submit" class="btn btn-primary">提交</button>-->
                    <!--</div>-->


            </div>
        </div>
    </div>
    <script type="text/javascript">
        $(document).ready(function(){//当所有html加载完成后执行
            $("button").on('click',
                function() {
                    var tr = $(this).parent().parent();//获取被点击按钮所在的行
                    var td = tr.find("td");//获取当前行的所有列
                    $("#myModal").modal('show');//显示模态框
                    var snov = td[0].innerHTML;//获取当前列的文本内容
                    var snamev = td[1].innerHTML;
                    var sagev = td[2].innerHTML;
                    var ssexv = td[3].innerHTML;
                    //将当前行的信息写入模态框中表单对应的地方
                    $("#sno").val(snov);
                    $("#sname").val(snamev);
                    $("#sage").val(sagev);
                    $("#ssex").val(ssexv);
                }
            );
            $("#myForm").on('submit',function (e) {
                e.preventDefault();
                $.ajax({
                    url: 'showall.html',
                    type: 'POST',
                    data: $('#myForm').serialize(),
                    success: function(){
                        window.location.href = "showall.html";
                        // 当Ajax请求后，返回的只能是字符流,不是页面，所以需要调用函数强制跳转
                    }
                });
            })
        });
    </script>



</body>
</html>